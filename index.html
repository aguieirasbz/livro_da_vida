<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Clube Infantil - Canais Infantis & Evangélicos</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600;700&display=swap" rel="stylesheet" />

  <style>
    :root{
      --bg: #F6F8FF;
      --card: #FFFFFF;
      --accent: #FFB703;
      --accent-2: #8EC5FF;
      --text: #10375C;
    }
    body{
      font-family: 'Baloo 2', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
      background: linear-gradient(180deg, #f8fcff 0%, var(--bg) 100%);
      color: var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    header{ background: linear-gradient(90deg, var(--accent), var(--accent-2)); }
    .logo-box{ background: rgba(255,255,255,0.15); backdrop-filter: blur(4px); }
    .kid-card{ transition: transform .18s ease, box-shadow .18s ease; }
    .kid-card:hover{ transform: translateY(-6px); box-shadow: 0 12px 30px rgba(16,55,92,0.12); }
    .section-title{ font-size: 1.15rem; font-weight:700; color: #08324a; }
    .small-note{ font-size: .9rem; color: #214E66; }
    .open-btn{ background: linear-gradient(90deg,#2b9af3,#5ad6ff); }
    @media (min-width:1024px){ .main-grid{ grid-template-columns: 2fr 1fr; } }
  </style>
</head>

<body>
  <header class="py-5 shadow-md sticky top-0 z-50">
    <div class="max-w-6xl mx-auto px-4 flex items-center justify-between">
      <div class="flex items-center gap-4">
        <div class="p-2 rounded-xl logo-box">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="24" height="24" rx="6" fill="#fff" opacity="0.06"/>
            <path d="M4 13c0-4 4-6 8-6s8 2 8 6v3H4v-3z" fill="#fff" opacity="0.9"/>
          </svg>
        </div>
        <div>
          <h1 class="text-2xl md:text-3xl font-bold text-white">Clube Infantil</h1>
          <div class="text-sm text-white/90">Canais Infantis e Evangélicos selecionados para a família</div>
        </div>
      </div>
      <div class="flex items-center gap-4">
        <a href="admin.html" class="text-sm text-white/90 underline decoration-white/40">Gerenciar canais</a>
        <div class="text-sm text-white/90">Supervisão parental recomendada • Conteúdo externo</div>
      </div>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-4 py-8">
    <p class="mb-6 small-note max-w-3xl">Esta página traz uma seleção de canais do YouTube pensada para crianças: separei canais infantis (músicas, histórias e atividades) e canais evangélicos voltados para o público infantil. Sempre acompanhe o que as crianças assistem.</p>

    <div class="grid gap-8 main-grid">
      <!-- Área principal -->
      <section class="bg-white rounded-2xl shadow-sm p-5">
        <div id="panel" class="flex flex-col lg:flex-row gap-4 items-start">
          <div class="w-full lg:w-2/3">
            <div id="panel-art" class="h-56 bg-gradient-to-tr from-[#fff6e6] to-[#e6f7ff] rounded-xl flex items-center justify-center">
              <div id="panel-thumb" class="text-center px-6">
                <div id="panel-name" class="text-2xl font-bold">Selecione um canal</div>
                <div id="panel-desc" class="mt-2 text-sm text-gray-700">Clique em um dos cards à direita para abrir o canal no YouTube.</div>
              </div>
            </div>
          </div>

          <div class="w-full lg:w-1/3 flex flex-col gap-3">
            <div class="p-3 rounded-xl bg-gradient-to-r from-white to-white/40 border border-gray-100">
              <div id="panel-ch-name" class="font-semibold">Nenhum canal selecionado</div>
              <div id="panel-ch-actions" class="mt-3 flex gap-2">
                <a id="open-channel" class="open-btn text-white px-3 py-2 rounded-md text-sm shadow-sm" href="#" target="_blank" rel="noopener">Abrir canal</a>
                <button id="learn-more" class="px-3 py-2 rounded-md bg-gray-100 text-sm">Ver no YouTube</button>
              </div>
            </div>

            <div class="text-xs text-gray-500">Dica: use o botão "Abrir canal" para acessar o conteúdo no YouTube em nova aba. Sempre habilite o modo restrito se desejar.</div>
          </div>
        </div>
      </section>

      <!-- Lista de canais -->
      <aside>
        <div class="space-y-6">
          <div>
            <h2 class="section-title">Canais Infantis</h2>
            <div id="kids-grid" class="mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3"></div>
          </div>

          <div>
            <h2 class="section-title">Canais Evangélicos (Infantis)</h2>
            <div id="faith-grid" class="mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3"></div>
          </div>
        </div>
      </aside>
    </div>
  </main>

  <footer class="max-w-6xl mx-auto px-4 py-6 text-center text-sm text-gray-500">
    Conteúdo externo: todos os vídeos são hospedados no YouTube. Página criada para facilitar o acesso — supervisão parental recomendada.
  </footer>
  <!-- Modal player (inicialmente oculto) -->
  <div id="player-modal" class="hidden fixed inset-0 bg-black/70 z-50 items-center justify-center p-4">
    <div class="bg-white rounded-xl overflow-hidden max-w-4xl w-full shadow-lg">
      <div class="flex items-center justify-between p-2 border-b">
        <div id="modal-title" class="font-semibold px-2">Reproduzindo</div>
        <button id="modal-close" class="px-3 py-1 text-sm text-gray-600">Fechar ✕</button>
      </div>
      <div id="modal-body" class="p-0">
        <!-- iframe será inserido aqui -->
      </div>
    </div>
  </div>
// ...existing code...
  <script>
    // Lista simples (padrão). A página tentará ler canais salvos em localStorage (chave 'livro_da_vida_channels')
    const defaultChannels = [
      { category: 'infantil', name: 'Galinha Pintadinha', desc: 'Músicas e vídeos infantis animados' },
      { category: 'infantil', name: 'Mundo Bita', desc: 'Canal com músicas educativas e personagens' },
      { category: 'infantil', name: 'Turma da Mônica', desc: 'Histórias e músicas da Turma da Mônica' },
      { category: 'infantil', name: 'Peppa Pig Brasil', desc: 'Episódios e músicas da Peppa' },
      { category: 'evangelico', name: 'Canções Gospel Infantís', desc: 'Músicas cristãs para crianças (busca)' },
      { category: 'evangelico', name: 'Música Cristã Infantil', desc: 'Louvores e histórias bíblicas para crianças' },
      { category: 'evangelico', name: 'Histórias Bíblicas Infantis', desc: 'Narrativas bíblicas contadas para crianças' },
      { category: 'evangelico', name: 'Canal Infantil Cristão', desc: 'Canal com conteúdo cristão para pequenos' }
    ];

    function getStoredChannels(){
      try{
        const raw = localStorage.getItem('livro_da_vida_channels');
        if(!raw) return defaultChannels.slice();
        const parsed = JSON.parse(raw);
        if(!Array.isArray(parsed)) return defaultChannels.slice();
        return parsed;
      }catch(e){
        console.warn('Erro ao ler canais salvos:', e);
        return defaultChannels.slice();
      }
    }

    function placeholderThumb(text){
      const color = 'ffd166';
      const textColor = '08324a';
      return `https://via.placeholder.com/480x270/${color}/${textColor}?text=${encodeURIComponent(text)}`;
    }

    function openYouTubeSearch(query){
      const url = `https://www.youtube.com/results?search_query=${encodeURIComponent(query)}`;
      window.open(url, '_blank', 'noopener');
    }

    function buildEmbedHtml({ videoId, playlistId, name }){
      if(videoId){
        const src = `https://www.youtube.com/embed/${encodeURIComponent(videoId)}?rel=0&autoplay=1`;
        return `<div class="w-full h-56 lg:h-72 rounded-xl overflow-hidden"><iframe class="w-full h-full" src="${src}" title="${name}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>`;
      }
      if(playlistId){
        const src = `https://www.youtube.com/embed?listType=playlist&list=${encodeURIComponent(playlistId)}&rel=0&autoplay=1`;
        return `<div class="w-full h-56 lg:h-72 rounded-xl overflow-hidden"><iframe class="w-full h-full" src="${src}" title="${name}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>`;
      }
      // fallback placeholder
      return `<div class="h-56 bg-gradient-to-tr from-[#fff6e6] to-[#e6f7ff] rounded-xl flex items-center justify-center"><div class="text-center px-6"><div class="text-2xl font-bold">${name}</div><div class="mt-2 text-sm text-gray-700">Nenhum vídeo embutido disponível — abra no YouTube ou adicione videoId/playlistId via Gerenciar canais.</div></div></div>`;
    }

    function createCard(channel){
      const card = document.createElement('div');
      card.className = 'kid-card p-3 bg-white rounded-xl shadow-sm flex items-center gap-3 cursor-pointer';
      card.innerHTML = `
        <img src="${placeholderThumb(channel.name)}" alt="${channel.name}" class="w-24 h-14 object-cover rounded-md flex-shrink-0" />
        <div>
          <div class="font-semibold">${channel.name}</div>
          <div class="text-xs text-gray-500">${channel.desc}</div>
        </div>`;

      card.addEventListener('click', () => {
        // Atualiza painel
        document.getElementById('panel-name').textContent = channel.name;
        document.getElementById('panel-desc').textContent = channel.desc;

          // guarda canal selecionado globalmente para ações posteriores
          window.currentChannel = channel;

          // Atualiza área de arte/painel com iframe se possível
          const panelArt = document.getElementById('panel-art');
          panelArt.innerHTML = buildEmbedHtml(channel);

        // Ajusta botão Abrir canal: se há videoId, abre vídeo direto; se há playlistId, abre playlist; caso contrário abre pesquisa
        const openBtn = document.getElementById('open-channel');
        if(channel.videoId){
          openBtn.href = `https://www.youtube.com/watch?v=${encodeURIComponent(channel.videoId)}`;
        }else if(channel.playlistId){
          openBtn.href = `https://www.youtube.com/playlist?list=${encodeURIComponent(channel.playlistId)}`;
        }else{
          openBtn.href = `https://www.youtube.com/results?search_query=${encodeURIComponent(channel.name)}`;
        }
        openBtn.textContent = 'Abrir no YouTube';
      });

      return card;
    }

    function populate(){
      const kidsGrid = document.getElementById('kids-grid');
      const faithGrid = document.getElementById('faith-grid');
      kidsGrid.innerHTML = '';
      faithGrid.innerHTML = '';

      const channels = getStoredChannels();
      if(!channels || channels.length === 0){
        const msg = document.createElement('div');
        msg.className = 'text-sm text-gray-500';
        msg.textContent = 'Nenhum canal cadastrado. Use a página de gerenciamento para adicionar canais.';
        kidsGrid.appendChild(msg);
        return;
      }

      channels.forEach(ch => {
        const card = createCard(ch);
        if(ch.category === 'infantil') kidsGrid.appendChild(card);
        else faithGrid.appendChild(card);
      });
    }

    document.addEventListener('DOMContentLoaded', () => {
      populate();
      // adequação inicial do botão: abrir no modal se possível, senão abrir no YouTube
      document.getElementById('open-channel').addEventListener('click', (e) => {
        const current = window.currentChannel || null;
        if(current && (current.videoId || current.playlistId)){
          e.preventDefault();
          showModal(current);
          return;
        }
        // se não tiver videoId/playlistId, deixa abrir no YouTube (link já ajustado ao clicar no card)
      });
      // modal close
      document.getElementById('modal-close').addEventListener('click', closeModal);
      document.getElementById('player-modal').addEventListener('click', (ev) => {
        if(ev.target.id === 'player-modal') closeModal();
      });
      document.getElementById('learn-more').addEventListener('click', () => {
        alert('Ao abrir o canal, você será levado ao YouTube. Lembre-se de acompanhar o conteúdo com uma conta e modo restrito se desejar.');
      });
    });

    function showModal(channel){
      const modal = document.getElementById('player-modal');
      const body = document.getElementById('modal-body');
      const title = document.getElementById('modal-title');
      title.textContent = channel.name || 'Reproduzindo';
      // cria iframe maior para modal (autoplay)
      let src = '';
      if(channel.videoId) src = `https://www.youtube.com/embed/${encodeURIComponent(channel.videoId)}?rel=0&autoplay=1`;
      else if(channel.playlistId) src = `https://www.youtube.com/embed?listType=playlist&list=${encodeURIComponent(channel.playlistId)}&rel=0&autoplay=1`;
      if(!src){
        // fallback: abre pesquisa em nova aba
        window.open(`https://www.youtube.com/results?search_query=${encodeURIComponent(channel.name)}`,'_blank');
        return;
      }
      body.innerHTML = `<div class="aspect-video w-full"><iframe src="${src}" class="w-full h-[60vh]" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>`;
      modal.classList.remove('hidden');
      modal.classList.add('flex');
    }

    function closeModal(){
      const modal = document.getElementById('player-modal');
      const body = document.getElementById('modal-body');
      body.innerHTML = '';
      modal.classList.remove('flex');
      modal.classList.add('hidden');
    }
  </script>

</body>
</html>
